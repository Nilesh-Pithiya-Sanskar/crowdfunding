import{N as D,F as G}from"./Footer.aa7db8d5.js";import{_ as N,o as n,c as a,e as t,k as u,w as p,F as h,g,b as _,t as o,y as w,G as k,p as f,I as $,r as b,n as E}from"./index.c23668e1.js";import{F as j}from"./FileUploader.2a333388.js";const T={name:"Login",components:{Navbar:D,Footer:G,FileUploader:j},data(){return{user_data:"",donation_details:"",donor:"",campaign_details:"",donor_total_donation_amount:0,donor_count_campaign:0,campaign_report:"",edit_profile:!1,email:"",phone:"",first_name:"",last_name:"",pan_number:""}},mounted(){const e=$();this.get_user_detail(e.params.name),this.get_donation_details(e.params.name),this.get_campaign_details(e.params.name),this.get_details_of_donor_donations(e.params.name),this.get_details_of_ngo_campaigns(e.params.name),this.donor=e.params.name},computed:{},resources:{download_80g(){return{method:"sadbhavna_donatekart.api.donor.download_80g",onSuccess:e=>{console.log("okey",e);let l=`/api/method/frappe.utils.print_format.download_pdf?doctype=Tax Exemption 80G Certificate&name=${e}&format=80G Certificate for Donation`;window.open(l,"_blank")},onError:e=>{console.log("somthing want wrong!",e)}}},get_details_of_donor_donations(){return{method:"sadbhavna_donatekart.api.donor.get_details_of_donor_donations",onSuccess:e=>{this.donor_count_campaign=e[0],this.donor_total_donation_amount=e[1]},onError:e=>{console.log("error",e)}}},get_details_of_ngo_campaigns(){return{method:"sadbhavna_donatekart.api.campaign.get_details_of_ngo_campaigns",onSuccess:e=>{this.campaign_report=e[0]},onError:e=>{console.log("error",e)}}},update_donor(){return{method:"sadbhavna_donatekart.api.donor.update_donor",onSuccess:e=>{this.$toast({title:"Profile Updated",text:"Your Profile is successfully updated.",customIcon:"check"}),this.$router.go(-1)},onError:e=>{console.log("error",e),this.$toast({title:"Error",text:e,customIcon:"circle-fail",appearance:"denger"})}}},set_image(){return{method:"sadbhavna_donatekart.api.donor.set_image",onSuccess:e=>{this.$toast({title:"Profile Picture Updated",text:"Your Profile Picture is successfully updated.",customIcon:"check"}),this.$router.go()},onError:e=>{console.log("error",e),this.$toast({title:"Error",text:e,customIcon:"circle-fail",appearance:"denger"})}}}},methods:{get_user_detail(e){let l="/api/resource/User/"+e;fetch(l,{method:"GET"}).then(d=>{d.json().then(c=>{this.user_data=c,this.email=c.data.email,this.phone=c.data.phone,this.first_name=c.data.first_name,this.last_name=c.data.last_name,this.pan_number=""})}).catch(d=>{console.error(d)})},get_donation_details(e){let l=`/api/resource/Donation?filters={"email": "${e}"}&fields=["*"]`;fetch(l,{method:"GET"}).then(d=>{d.json().then(c=>{this.donation_details=c})}).catch(d=>{console.log(d)})},download_80g(e,l){this.$resources.download_80g.submit({donation:e,date:l,donor:this.donor})},get_campaign_details(e){let l=`/api/resource/NGO?filters={"email": "${e}"}&fields=["name"]`;fetch(l,{method:"GET"}).then(d=>{d.json().then(c=>{let m=`/api/resource/Donation Campaign?filters={"ngo": "${c.data[0].name}"}&fields=["*"]`;fetch(m,{method:"GET"}).then(y=>{y.json().then(x=>{this.campaign_details=x.data})})})}).catch(d=>{console.log(d)})},get_details_of_donor_donations(e){this.$resources.get_details_of_donor_donations.submit({donor:e})},get_details_of_ngo_campaigns(e){this.$resources.get_details_of_ngo_campaigns.submit({ngo:e})},edit(){this.edit_profile=!0},save(){this.edit_profile=!1,this.$resources.update_donor.submit({first_name:this.first_name,last_name:this.last_name,phone:this.phone,old_email:this.donor,pan_number:this.pan_number})},cancel(){this.edit_profile=!1},upload_image(e){alert("clicked",e),console.log("url",e),this.$resources.set_image.submit({name:this.donor,user_image:e})}}},P={key:0,class:"profile-page"},F={class:"h-500-px bg-blueGray-200"},S={class:"pb-4 bg-blueGray-200"},U={class:"container mx-auto px-4 pt-96"},q={class:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64"},Y={class:"px-6"},L={class:"flex flex-wrap justify-center"},R={class:"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center"},V={key:0,class:"relative"},I=["src"],A={class:"shadow-xl rounded-full align-middle border-none absolute ml-12 mt-16 lg:ml-16"},B=["onClick"],M=t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),H=t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1),z=[M,H],O={key:1,class:"relative"},J=t("img",{src:"https://crowdfunding.frappe.cloud/files/default_profile.jpeg",class:"shadow-xl rounded-full h-40 align-middle border-2 border-solid border-gray-300 absolute -m-16 -ml-20 lg:-ml-16 max-w-200-px"},null,-1),K={class:"shadow-xl rounded-full align-middle border-none absolute ml-12 mt-16 lg:ml-16"},Q=["onClick"],W=t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),X=t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1),Z=[W,X],tt={class:"lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center"},et={key:0,class:"py-6 px-3 mt-32 sm:mt-0"},ot={class:"w-full lg:w-4/12 px-4 lg:order-1"},st={key:0,class:"flex justify-center py-4 lg:pt-4 pt-8"},nt={class:"mr-4 p-3 text-center"},at={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},lt={class:"text-sm text-blueGray-500"},it={class:"mr-4 p-3 text-center"},rt={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},dt={class:"text-sm text-blueGray-500"},ct={key:1,class:"flex justify-center py-4 lg:pt-4 pt-8"},_t={class:"mr-4 p-3 text-center"},mt={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},ut={class:"text-sm text-blueGray-500"},pt={class:"mr-4 p-3 text-center"},ht={class:"text-xl font-bold block uppercase tracking-wide text-blue-500"},gt={class:"text-sm text-blueGray-500"},xt={class:"lg:mr-4 p-3 text-center"},ft={class:"text-xl font-bold block uppercase tracking-wide text-red-500"},bt={class:"text-sm text-blueGray-500"},yt={class:"mt-10"},vt={class:"container mx-auto h-full"},wt={class:"w-full bg-grey-lightest"},kt={class:"container mx-auto py-0"},Ct={class:"w-4/6 lg:w:4/6 mx-auto bg-white"},Dt={class:""},Gt={key:0,class:"text-center"},Nt={class:"text-4xl font-semibold leading-normal mb-2 text-blueGray-700"},$t={class:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase"},Et={key:1,class:"text-center"},jt={class:"grid lg:grid-cols-2 md:grid-cols-2 sm:grid-cols-1 gap-4 justify-items-center mb-4"},Tt={class:"block text-grey-darker text-sm font-bold mb-2",for:"first_name"},Pt={class:"block text-grey-darker text-sm font-bold mb-2",for:"last_name"},Ft={class:"mb-4 lg:mr-8 sm:ml-0 lg:ml-8 sm:ml-0"},St={class:"block text-grey-darker text-sm font-bold mb-2",for:"number"},Ut=t("span",{class:"text-red-600"},"*",-1),qt={key:0},Yt={key:0,class:"text-center pt-4 text-2xl text-gray-600"},Lt={key:1,class:"flex flex-col"},Rt={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Vt={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},It={class:"overflow-hidden"},At={class:"min-w-full"},Bt={class:"bg-white border-b"},Mt={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Ht={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},zt={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Ot={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Jt={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},Kt={class:"text-sm text-gray-900 font-light px-6 py-4"},Qt={class:"text-sm text-gray-900 font-light px-6 py-4"},Wt={class:"text-sm text-gray-900 font-light px-6 py-4"},Xt=["onClick"],Zt={key:2},te={class:"text-center font-bold text-gray-500"},ee={class:"text-center text-sm leading-normal mt-2 mb-5 text-blue-400 font-bold"},oe={key:1},se={key:0,class:"text-center text-2xl text-gray-600"},ne={key:1,class:"flex flex-col"},ae={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},le={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},ie={class:"overflow-hidden"},re={class:"min-w-full"},de={class:"bg-white border-b"},ce={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},_e={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},me={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},ue={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},pe={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},he={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},ge={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},xe={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},fe={class:"text-sm text-gray-900 font-light px-6 py-4"},be={class:"text-sm text-gray-900 font-light px-6 py-4"},ye={class:"text-sm text-gray-900 font-light px-6 py-4"},ve={class:"text-sm text-green-500 font-bold px-6 py-4"},we={class:"text-sm text-gray-900 font-light px-6 py-4"},ke={class:"text-sm text-gray-900 font-light px-6 py-4"},Ce={class:"text-center text-sm leading-normal m-4 text-blue-400 font-bold"},De={key:2},Ge={class:"text-center font-bold text-gray-500"},Ne={class:"text-center text-sm leading-normal mt-2 mb-5 text-blue-400 font-bold"};function $e(e,l,d,c,s,m){const y=b("Navbar"),x=b("FileUploader"),v=b("router-link"),C=b("Footer");return s.user_data?(n(),a("main",P,[t("section",F,[u(y),t("div",S,[t("div",U,[t("div",q,[t("div",Y,[t("div",L,[t("div",R,[s.user_data.data.user_image?(n(),a("div",V,[t("img",{src:s.user_data.data.user_image,class:"shadow-xl rounded-full h-40 align-middle border-none absolute -m-16 -ml-20 lg:-ml-16 max-w-200-px"},null,8,I),t("div",A,[u(x,{onSuccess:l[0]||(l[0]=i=>m.upload_image(i.file_url))},{default:p(({openFileSelector:i})=>[(n(),a("svg",{onClick:i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},z,8,B))]),_:1})])])):(n(),a("div",O,[t("div",null,[J,t("div",K,[u(x,{onSuccess:l[1]||(l[1]=i=>m.upload_image(i.file_url))},{default:p(({openFileSelector:i})=>[(n(),a("svg",{onClick:i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},Z,8,Q))]),_:1})])])]))]),(n(!0),a(h,null,g(s.user_data.data.roles,i=>(n(),a("div",tt,[i.role=="Donor"?(n(),a("div",et,[s.edit_profile?_("",!0):(n(),a("button",{key:0,onClick:l[2]||(l[2]=r=>m.edit()),class:"bg-green-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded lg:ml-0 md:ml-0 sm:ml-32 ease-linear transition-all duration-150",type:"button"},o(e.$t("Edit Profile")),1))])):_("",!0)]))),256)),s.user_data?(n(!0),a(h,{key:0},g(s.user_data.data.roles,i=>(n(),a("div",ot,[i.role=="Donor"?(n(),a("div",st,[t("div",nt,[t("span",at,o(s.donor_count_campaign),1),t("span",lt,o(e.$t("Total Donation Campaign")),1)]),t("div",it,[t("span",rt,o(s.donor_total_donation_amount),1),t("span",dt,o(e.$t("Total Donate Amount")),1)])])):i.role=="Ngo"?(n(),a("div",ct,[t("div",_t,[t("span",mt,o(s.campaign_report.total_live_campaign),1),t("span",ut,o(e.$t("Total Live Campaign")),1)]),t("div",pt,[t("span",ht,o(s.campaign_report.total_pending_campaign),1),t("span",gt,o(e.$t("Total Pending Campaign")),1)]),t("div",xt,[t("span",ft,o(s.campaign_report.total_rejected_campaign),1),t("span",bt,o(e.$t("Total Rejected Campaign")),1)])])):_("",!0)]))),256)):_("",!0)]),t("div",yt,[t("div",vt,[t("div",wt,[t("div",kt,[t("div",Ct,[t("form",null,[t("div",Dt,[s.edit_profile?(n(),a("div",Et,[t("div",jt,[t("div",null,[t("label",Tt,o(e.$t("First Name")),1),w(t("input",{class:"appearance-none form-control block border rounded w-full text-grey-darker","onUpdate:modelValue":l[3]||(l[3]=i=>s.first_name=i),placeholder:"Your first name",type:"text",required:""},null,512),[[k,s.first_name]])]),t("div",null,[t("label",Pt,o(e.$t("Last Name")),1),w(t("input",{class:"appearance-none border form-control block rounded w-full text-grey-darker","onUpdate:modelValue":l[4]||(l[4]=i=>s.last_name=i),type:"text",placeholder:"Your last name",required:""},null,512),[[k,s.last_name]])])]),t("div",Ft,[t("label",St,[f(o(e.$t("Phone Number"))+" ",1),Ut]),w(t("input",{class:"appearance-none border form-control block rounded w-full py-2 text-grey-darker","onUpdate:modelValue":l[5]||(l[5]=i=>s.phone=i),type:"number",placeholder:"Your phone number",required:""},null,512),[[k,s.phone]])]),t("button",{onClick:l[6]||(l[6]=i=>m.save()),class:"bg-green-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded mr-2 mb-4 ease-linear transition-all duration-150",type:"button"},o(e.$t("Save")),1),t("button",{onClick:l[7]||(l[7]=i=>m.cancel()),class:"bg-gray-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded mr-2 mb-4 ease-linear transition-all duration-150",type:"button"},o(e.$t("cancel")),1)])):(n(),a("div",Gt,[t("h3",Nt,o(s.user_data.data.full_name),1),t("div",$t,[t("div",null,o(s.user_data.data.email),1),t("div",null,o(s.user_data.data.phone),1)])]))])])])])])])]),s.user_data?(n(!0),a(h,{key:0},g(s.user_data.data.roles,i=>(n(),a("div",null,[i.role=="Donor"?(n(),a("div",qt,[s.donation_details.data!=""?(n(),a("div",Yt,o(e.$t("Your Donations")),1)):_("",!0),s.donation_details.data!=""?(n(),a("div",Lt,[t("div",Rt,[t("div",Vt,[t("div",It,[t("table",At,[t("thead",Bt,[t("tr",null,[t("th",Mt,o(e.$t("Campaign Name")),1),t("th",Ht,o(e.$t("Amount")),1),t("th",zt,o(e.$t("Date")),1),t("th",Ot,o(e.$t("Download 80G Certificate")),1)])]),t("tbody",null,[(n(!0),a(h,null,g(s.donation_details.data,r=>(n(),a("tr",Jt,[t("td",Kt,o(r.name),1),t("td",Qt,o(r.amount),1),t("td",Wt,o(r.date),1),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 cursor-pointer",onClick:Ee=>m.download_80g(r.name,r.date)},o(e.$t("Download")),9,Xt)]))),256))])])])])])])):(n(),a("div",Zt,[t("div",te,o(e.$t("Donate Item to see Donations and Download Certificate")),1),t("div",ee,[u(v,{to:"/sadbhavna"},{default:p(()=>[f(o(e.$t("Click Here To Explore Campaign")),1)]),_:1})])]))])):i.role=="NGO"?(n(),a("div",oe,[s.campaign_details.data!=""?(n(),a("div",se,o(e.$t("Your Campaign")),1)):_("",!0),s.campaign_details.data!=""?(n(),a("div",ne,[t("div",ae,[t("div",le,[t("div",ie,[t("table",re,[t("thead",de,[t("tr",null,[t("th",ce,o(e.$t("Campaign Name")),1),t("th",_e,o(e.$t("Campaign Category")),1),t("th",me,o(e.$t("Requested Amount")),1),t("th",ue,o(e.$t("Raised Amount")),1),t("th",pe,o(e.$t("Start Date")),1),t("th",he,o(e.$t("End Date")),1),t("th",ge,o(e.$t("Status")),1)])]),t("tbody",null,[(n(!0),a(h,null,g(s.campaign_details,r=>(n(),a("tr",xe,[t("td",fe,o(r.campaign_title),1),t("td",be,o(r.campaign_category),1),t("td",ye,o(r.donation_amount),1),t("td",ve,o(r.raised_amount),1),t("td",we,o(r.start_date),1),t("td",ke,o(r.end_date),1),t("td",{class:E(["text-sm font-bold px-6 py-4",r.status==="Live"?"text-green-500":"",r.status==="Pending"?"text-blue-500":"",r.status==="Rejected"?"text-red-500":"",r.status==="Closed"?"text-orange-500":""])},o(r.status),3)]))),256))])])]),t("div",Ce,[u(v,{to:"/sadbhavna/request-campaign"},{default:p(()=>[f(o(e.$t("Request New Campaign")),1)]),_:1})])])])])):(n(),a("div",De,[t("div",Ge,o(e.$t("You don't have any campaign live yet.")),1),t("div",Ne,[u(v,{to:"/sadbhavna/request-campaign"},{default:p(()=>[f(o(e.$t("Click Here To Request A New Campaign")),1)]),_:1})])]))])):_("",!0)]))),256)):_("",!0)])])])]),u(C)])])):_("",!0)}var Fe=N(T,[["render",$e]]);export{Fe as default};
