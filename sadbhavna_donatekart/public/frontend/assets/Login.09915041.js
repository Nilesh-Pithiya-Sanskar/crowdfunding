var g=(e,o,d)=>new Promise((m,l)=>{var a=r=>{try{i(d.next(r))}catch(s){l(s)}},c=r=>{try{i(d.throw(r))}catch(s){l(s)}},i=r=>r.done?m(r.value):Promise.resolve(r.value).then(a,c);i((d=d.apply(e,o)).next())});import{_ as v,E as x,o as y,c as $,k as u,e as t,t as n,p as h,G as f,H as b,l as _,w,F as k,r as p}from"./index.ed28e7db.js";import{N as E,F as P}from"./Footer.222d44b8.js";var F="/assets/sadbhavna_donatekart/frontend/assets/logo-1.1.73ae79ff.ico";const N={name:"Login",components:{Navbar:E,Footer:P},setup(){return{user:inject("user")}},data(){return{password:"",error:!1,passwordError:"",emailError:"",email:"",isLogin:!1}},created(){this.user.isLoggedIn()&&this.$router.push("/"),document.title=this.$t("Login Now | BestDeed");const e=document.querySelector('link[rel="canonical"]');if(e)e.href="https://bestdeed.org/login-via-email",document.head.appendChild(e);else{var o=document.createElement("link");o.rel="canonical",o.href="https://bestdeed.org/login-via-email",document.head.appendChild(o)}},mounted(){this.$nextTick(()=>this.$refs.email.focus())},resources:{login(){return{method:"/api/method/login",onSuccess:()=>g(this,null,function*(){var e=this.$cookies.get("route");console.log("route",e),e!=null?this.$router.go(-2):this.$router.push("/")}),onError:e=>{this.$toast({title:"Error",text:this.$t("User Name or Password Incorrect"),icon:"x-circle",appearance:"denger",position:"top-center"}),this.email="",this.password=""}}},login_with_google(){return{method:"frappe.www.login.login_via_token",onSuccess:()=>{this.$router.push("/")},onError:e=>{console.log("error",e),this.$toast({title:"Error",text:"Something want Wrong!",icon:"x-circle",appearance:"denger",position:"top-center"})}}},forgotPassword(){return{method:"sadbhavna_donatekart.api.api.forgot_password",onSuccess:e=>{e=="user not found with this email"?this.emailError=e:(console.log("mail send"),this.$toast({title:"Mail Sent",text:this.$t("forgot password mail is sent open link to set password"),icon:"right",position:"top-center"}))},onError:e=>{console.log("error for pass",e)}}}},methods:{login(){console.log("email dsfas"),!this.email&&!this.password?this.error==!0:this.email==""?(this.emailError=this.$t("Please enter email!"),this.error=!0,console.log("email")):this.password==""?(this.passwordError=this.$t("Please enter password!"),this.error=!0,console.log("password")):(this.error==!1,this.$resources.login.submit({usr:this.email,pwd:this.password}))},login_with_google:e=>{let o=x(e.credential),d=o.email,m=o.family_name,l=o.given_name,a=o.picture,c=`http://sadbhavnadonatekart.com:8080/api/method/sadbhavna_donatekart.api.api.login_with_google?email=${d}&first_name=${m}&last_name=${l}&image_url=${a}`;fetch(c,{method:"GET"}).then(i=>{i.json().then(r=>{console.log("asdf",r.message),console.log("asdf",r),r.message,window.location="http://sadbhavnadonatekart.com:8080/home"})}).catch(function(i){log("Request failed",i)})},forgotPassword(){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.email==""?this.emailError=this.$t("Please enter email!"):e.test(this.email)==!1&&this.email?this.emailError=this.$t("Please enter valid email!"):this.$resources.forgotPassword.submit({email:this.email})}}},S={class:"grid sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3"},G=t("div",{class:"z-0"},[t("img",{class:"w-full h-auto object-cover bg-left"})],-1),L={class:"z-10 py-10 layout"},C={class:"py-0"},j={class:"p-6 shadow-lg card-shodow w-full md:w-[350px] lg:w-[440px] mx-auto bg-white"},z=t("img",{src:F,class:"mx-auto rounded-full border border-[#40b751] md:mr-2 lg:mr-2 w-18 h-14 md:h-16 lg:h-20 ml-0 lg:ml-6"},null,-1),V={class:"text-[#40b751] text-center mb-3 font-bold text-[30px] md:text-[32px] lg:text-[34px]"},q={class:"w-full mb-3"},B={class:"block text-blueGray-600 text-sm font-bold mb-2",htmlFor:"grid-password"},D=t("span",{class:"text-red-600"},"*",-1),I=["placeholder"],M={class:"text-red-600"},T={class:"w-full mb-3"},K={class:"block text-blueGray-600 text-sm font-bold mb-2",htmlFor:"grid-password"},U=t("span",{class:"text-red-600"},"*",-1),A=["placeholder"],R={class:"text-red-600"},W={class:"text-red-600"},Z={class:"text-center mt-6"},H={class:"pt-2 flex flex-wrap login-with-mobile justify-between"},J=t("div",{class:"grid content-end z-0"},[t("img",{class:"w-full h-auto object-cover bg-right"})],-1);function O(e,o,d,m,l,a){const c=p("Navbar"),i=p("router-link"),r=p("Footer");return y(),$(k,null,[u(c),t("section",null,[t("div",S,[G,t("div",L,[t("div",C,[t("div",j,[z,t("h1",V,[t("small",null,n(e.$t("Sign In")),1)]),t("form",null,[t("div",q,[t("label",B,[h(n(e.$t("Email"))+" ",1),D]),f(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>l.email=s),onKeyup:[o[1]||(o[1]=s=>l.emailError=""),o[2]||(o[2]=_((...s)=>a.login&&a.login(...s),["enter"]))],type:"email",class:"placeholder-blueGray-300 appearance-none border-gray-300 text-sm hover:border-[#40b751] focus:text-black focus:font-semibold rounded w-full py-2 px-3",placeholder:e.$t("Email"),required:""},null,40,I),[[b,l.email]]),t("p",M,n(l.emailError),1)]),t("div",T,[t("label",K,[h(n(e.$t("Password")),1),U]),f(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>l.password=s),type:"password",onKeyup:o[4]||(o[4]=_((...s)=>a.login&&a.login(...s),["enter"])),class:"placeholder-blueGray-300 appearance-none border-gray-300 text-sm hover:border-[#40b751] focus:text-black focus:font-semibold rounded w-full py-2 px-3 ease-linear transition-all duration-150",placeholder:e.$t("Password"),required:""},null,40,A),[[b,l.password]]),t("p",R,n(l.passwordError),1)]),t("p",W,n(e.errorMsg),1),t("div",Z,[t("button",{style:{"background-color":"#40b751"},class:"cursor-pointer border-[#40b751] hover:border-[#40b751] hover:bg-transparent text-white active:bg-blueGray-600 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-4 w-full ease-linear transition-all duration-150",type:"button",onClick:o[5]||(o[5]=s=>a.login())},n(e.$t("Sign In")),1),t("div",{onClick:o[6]||(o[6]=s=>a.forgotPassword()),class:"cursor-pointer text-green-500"},n(e.$t("Forgot Password?")),1)]),t("div",H,[u(i,{to:"/login",class:"px-4 text-green-500"},{default:w(()=>[h(n(e.$t("Login With Mobile")),1)]),_:1}),u(i,{to:"/registration",class:"text-green-500 px-4 border-emerald-600 text-emerald-600 inline-block rounded border-2 px-6 pb-[6px] pt-2 text-sm leading-normal transition duration-150 ease-in-out hover:bg-neutral-500 hover:bg-opacity-10 focus:outline-none text-green-500 focus:ring-0 dark:hover:bg-neutral-100 dark:hover:bg-opacity-10"},{default:w(()=>[h(n(e.$t("Register")),1)]),_:1})])])])])]),J])]),u(r)],64)}var ee=v(N,[["render",O]]);export{ee as default};
