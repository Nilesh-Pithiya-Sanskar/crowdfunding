var g=(e,o,d)=>new Promise((u,l)=>{var a=r=>{try{i(d.next(r))}catch(s){l(s)}},c=r=>{try{i(d.throw(r))}catch(s){l(s)}},i=r=>r.done?u(r.value):Promise.resolve(r.value).then(a,c);i((d=d.apply(e,o)).next())});import{_ as x,A as v,o as y,c as E,k as m,e as t,t as n,p,C as w,E as f,l as b,w as _,F as k,r as h}from"./index.3e771c68.js";import{N as $,F as P}from"./Footer.38b28041.js";const G={name:"Login",components:{Navbar:$,Footer:P},data(){return{password:"",error:!1,passwordError:"",emailError:"",email:"",isLogin:!1}},created(){document.title=this.$t("Login now | BestDeed")},resources:{login(){return{method:"/api/method/login",onSuccess:()=>g(this,null,function*(){var e=this.$cookies.get("route");console.log("route",e),e!=null?this.$router.go(-2):this.$router.push("/sadbhavna")}),onError:e=>{this.$toast({title:"Error",text:"User Name or Password Incorrect",icon:"x-circle",appearance:"denger",position:"top-center"}),this.email="",this.password=""}}},login_with_google(){return{method:"frappe.www.login.login_via_token",onSuccess:()=>{this.$router.push("/sadbhavna")},onError:e=>{console.log("error",e),this.$toast({title:"Error",text:"Something want Wrong!",icon:"x-circle",appearance:"denger",position:"top-center"})}}},forgotPassword(){return{method:"sadbhavna_donatekart.api.api.forgot_password",onSuccess:e=>{e=="user not found with this email"?this.emailError=e:(console.log("mail send"),this.$toast({title:"Mail Sent",text:"forgot password mail is sent open link to set password",icon:"right",position:"top-center"}))},onError:e=>{console.log("error for pass",e)}}}},methods:{login(){!this.email&&!this.password?this.error==!0:this.email==""?(this.emailError="Please enter email!",this.error=!0,console.log("email")):this.password==""?(this.passwordError="Please enter password!",this.error=!0,console.log("password")):(this.error==!1,this.$resources.login.submit({usr:this.email,pwd:this.password}))},login_with_google:e=>{let o=v(e.credential),d=o.email,u=o.family_name,l=o.given_name,a=o.picture,c=`http://sadbhavnadonatekart.com:8080/api/method/sadbhavna_donatekart.api.api.login_with_google?email=${d}&first_name=${u}&last_name=${l}&image_url=${a}`;fetch(c,{method:"GET"}).then(i=>{i.json().then(r=>{console.log("asdf",r.message),console.log("asdf",r),r.message,window.location="http://sadbhavnadonatekart.com:8080/home"})}).catch(function(i){log("Request failed",i)})},forgotPassword(){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.email==""?this.emailError="Please enter email":e.test(this.email)==!1&&this.email?this.emailError="Please enter valid email":this.$resources.forgotPassword.submit({email:this.email})}}},F={class:"container mx-auto h-full my-20"},N={class:"flex content-center items-center justify-center h-full"},S={class:"w-11/12 md:w-6/12 lg:w-4/12 px-4"},C={class:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-200 border-0"},L={class:"flex-auto px-4 lg:px-10 py-10 pt-5"},V={class:"text-blueGray-400 text-center mb-3 font-bold text-[40px] md:text-[45px] lg:text-[45px]"},B={class:"relative w-full mb-3"},D={class:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password"},K=t("span",{class:"text-red-600"},"*",-1),M=["placeholder"],q={class:"text-red-600"},A={class:"relative w-full mb-3"},I={class:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password"},T=t("span",{class:"text-red-600"},"*",-1),U=["placeholder"],j={class:"text-red-600"},z={class:"text-red-600"},R={class:"text-center mt-6"},Z={class:"grid md:grid-cols-2 sm:grid-cols-2 cursor-pointer"},O={class:"text-center font-bold"};function W(e,o,d,u,l,a){const c=h("Navbar"),i=h("router-link"),r=h("Footer");return y(),E(k,null,[m(c),t("div",F,[t("div",N,[t("div",S,[t("div",C,[t("div",L,[t("div",V,[t("small",null,n(e.$t("Sign In")),1)]),t("form",null,[t("div",B,[t("label",D,[p(n(e.$t("Email"))+" ",1),K]),w(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>l.email=s),onKeyup:o[1]||(o[1]=s=>l.emailError=""),onKeydown:o[2]||(o[2]=b((...s)=>a.login&&a.login(...s),["enter"])),type:"email",class:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",placeholder:e.$t("Email"),required:""},null,40,M),[[f,l.email]]),t("p",q,n(l.emailError),1)]),t("div",A,[t("label",I,[p(n(e.$t("Password")),1),T]),w(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>l.password=s),onKeydown:o[4]||(o[4]=b((...s)=>a.login&&a.login(...s),["enter"])),type:"password",class:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",placeholder:e.$t("Password"),required:""},null,40,U),[[f,l.password]]),t("p",j,n(l.passwordError),1)]),t("p",z,n(e.errorMsg),1),t("div",R,[t("button",{style:{"background-color":"#40b751"},class:"cursor-pointer border-[#40b751] hover:border-[#40b751] bg-[#40b751] hover:bg-transparent text-white active:bg-blueGray-600 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-4 w-full ease-linear transition-all duration-150",type:"button",onClick:o[5]||(o[5]=s=>a.login())},n(e.$t("Sign In")),1)]),t("div",Z,[m(i,{to:"auto-login",class:"text-green-500 text-left"},{default:_(()=>[p(n(e.$t("Other Login Method")),1)]),_:1}),t("div",{onClick:o[6]||(o[6]=s=>a.forgotPassword()),class:"text-green-500 text-right"},n(e.$t("Forgot Password?")),1)]),t("div",O,[m(i,{to:"/sadbhavna/registration",class:"text-green-500 text-center"},{default:_(()=>[p(n(e.$t("Register")),1)]),_:1})])])])])])])]),m(r)],64)}var X=x(G,[["render",W]]);export{X as default};
