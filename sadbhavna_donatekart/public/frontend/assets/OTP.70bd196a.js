import{N as g,F as _}from"./Footer.41f5dc90.js";import{_ as w,D as x,o as a,c as i,k as p,e as t,t as n,C as d,E as u,b as y,w as v,F as f,H as k,r as c}from"./index.8979d6ac.js";const D={name:"OTP",components:{Navbar:g,Footer:_,Dialog:x},data(){return{message:"",number:"",otp:"",m_type:"",otp_message:"",password:"",re_password:"",passwordError:"",re_passwordError:"",email:"",showDialog:!1,countDown:5}},created(){this.countDownTimer();const e=document.querySelector('link[rel="canonical"]');if(e)e.href="https://bestdeed.org/otp",document.head.appendChild(e);else{var o=document.createElement("link");o.rel="canonical",o.href="https://bestdeed.org/otp",document.head.appendChild(o)}},mounted(){const e=k();document.title=this.$t("OTP | BestDeed"),this.$nextTick(()=>this.$refs.otp.focus()),this.message=e.params.message,this.number=e.params.number,this.m_type=e.params.m_type,console.log("message",this.message)},resources:{verify_otp(){return{method:"sadbhavna_donatekart.api.api.verify_otp",onSuccess:e=>{if(e[0]=="failed")this.otp_message="OTP is not match";else if(e[0]=="pass")this.email=e[1],this.showDialog=!0;else{var o=this.$cookies.get("route");console.log("route",o),o!=null?this.$router.go(-2):this.$router.push("/")}},onError:e=>{console.log("error",e)}}},resetPassword(){return{method:"sadbhavna_donatekart.api.api.reset_password",onSuccess:e=>{console.log("okey"),this.countDownTimer()},onError:e=>{console.log("error")}}},login_with_whatsapp(){return{method:"sadbhavna_donatekart.api.api.login_with_whatsapp",onSuccess:e=>{console.log("okey"),this.countDownTimer()},onError:e=>{console.log("error")}}},login_with_sms(){return{method:"sadbhavna_donatekart.api.api.login_with_sms",onSuccess:e=>{console.log("okey")},onError:e=>{console.log("error")}}}},methods:{verify_otp(){this.number==""?this.otp_message="Please enter OTP":this.$resources.verify_otp.submit({number:this.number,otp:this.otp,m_type:this.m_type})},resetPassword(){this.$resources.resetPassword.submit({email:this.email,password:this.password})},countDownTimer(){this.countDown>0&&setTimeout(()=>{this.countDown-=1,this.countDownTimer()},1e3)},resend_otp(){this.m_type=="whatsapp"?this.$resources.login_with_whatsapp.submit({phone:this.number}):this.m_type=="sms"&&this.$resources.login_with_sms.submit({phone:this.number})}}},P={class:"container mx-auto h-full"},T={class:"w-full sm:pt-0 md:pt-5 lg:pt-12 bg-grey-lightest"},E={class:"container mx-auto py-0"},V={class:"w-4/6 lg:w:4/6 mx-auto bg-white"},C={class:"py-8 px-10 text-gray-600 text-black text-center text-4xl"},O={class:"py-4 px-8"},N={class:"mb-7"},S={class:"block text-gray-600 text-base mb-2"},F={class:"mb-4"},$={class:"block text-gray-600 text-base mb-2",for:"email"},B={class:"block text-red-600 text-base mb-2"},R={class:"mb-4 flex flex-wrap justify-between"},U={key:2},q={class:"w-4/6 lg:w:4/6 mx-auto bg-white"},K={class:"text-2xl md:text-[30px] lg:text-[36px] font-semibold py-8 px-10 text-green-500 text-bold text-center"},j={class:"relative z-0"},z={class:"mb-4"},H={class:"text-red-600"},M={class:"mb-4"},A={class:"text-red-600"},G={class:"text-center"};function I(e,o,J,L,s,l){const m=c("Navbar"),h=c("Dialog"),b=c("Footer");return a(),i(f,null,[p(m),t("div",P,[t("div",T,[t("div",E,[t("div",V,[t("div",C,n(e.$t("Verify your contact detail")),1),t("div",O,[t("div",N,[t("span",S,n(s.message),1)]),t("div",F,[t("label",$,n(e.$t("Enter OTP")),1),d(t("input",{onKeyup:o[0]||(o[0]=r=>s.otp_message=""),class:"appearance-none border-gray-300 rounded w-full py-2 px-3 text-grey-darker","onUpdate:modelValue":o[1]||(o[1]=r=>s.otp=r),type:"number",ref:"otp"},null,544),[[u,s.otp]]),t("span",B,n(s.otp_message),1)]),t("div",R,[s.countDown==0?(a(),i("button",{key:0,class:"appearance-none border-gray-600 rounded w-auto text-grey-darker bg-green-500 hover:bg-transparent text-white hover:text-green-500 px-7 py-2 tracking-wide border border-green-500 hover:border-green-500 text-xs uppercase rounded",onClick:o[2]||(o[2]=r=>l.resend_otp())},"Resend OTP")):(a(),i("button",{key:1,class:"appearance-none border-gray-600 rounded w-auto text-grey-darker bg-green-500 hover:bg-transparent text-white hover:text-green-500 px-7 py-2 tracking-wide border border-green-500 hover:border-green-500 text-xs uppercase rounded",onClick:o[3]||(o[3]=r=>l.verify_otp())},n(e.$t("Verify OTP")),1)),s.countDown!=0?(a(),i("span",U,n(s.countDown),1)):y("",!0)])])])])])]),p(h,{modelValue:s.showDialog,"onUpdate:modelValue":o[9]||(o[9]=r=>s.showDialog=r)},{body:v(()=>[t("div",q,[t("h1",K,n(e.$t("Reset Password"))+" "+n(s.email),1),t("div",j,[t("div",z,[d(t("input",{class:"appearance-none border-gray-300 hover:border-[#40b751] rounded w-full py-2 px-3 focus:text-black focus:font-semibold","onUpdate:modelValue":o[4]||(o[4]=r=>s.password=r),type:"text",onKeyup:o[5]||(o[5]=r=>s.passwordError=""),placeholder:"Password",required:""},null,544),[[u,s.password]]),t("p",H,n(e.$t(s.passwordError)),1)]),t("div",M,[d(t("input",{class:"appearance-none border-gray-300 hover:border-[#40b751] rounded w-full py-2 px-3 focus:text-black focus:font-semibold","onUpdate:modelValue":o[6]||(o[6]=r=>s.re_password=r),type:"text",onKeyup:o[7]||(o[7]=r=>s.re_passwordError=""),placeholder:"Re-Password",required:""},null,544),[[u,s.re_password]]),t("p",A,n(e.$t(s.re_passwordError)),1)]),t("div",G,[t("button",{class:"mb-5 ml-2 rounded-lg bg-[#40b751] text-white active:bg-[#40b751] hover:border-green-600 uppercase text-sm px-6 py-3 shadow hover:bg-white hover:text-black hover:border-green-500 hover:border-2mr-1 ease-linear transition-all duration-150",type:"button",onClick:o[8]||(o[8]=r=>l.resetPassword())},n(e.$t("Set Password")),1)])])])]),_:1},8,["modelValue"]),p(b)],64)}var X=w(D,[["render",I]]);export{X as default};
