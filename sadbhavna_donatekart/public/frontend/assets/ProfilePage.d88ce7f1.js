import{N as P,F as E}from"./Footer.5ec34947.js";import{_ as N,o as a,c as r,e as t,k as u,w as f,F as p,g as h,b as c,t as s,C as x,E as b,p as g,z as D,H as j,r as y,n as G}from"./index.3d7d8a94.js";import{F as $}from"./FileUploader.f98a02c4.js";const M={name:"Login",components:{Navbar:P,Footer:E,FileUploader:$},setup(){return{user:D("user")}},data(){return{user_data:"",donation_details:"",donor:"",campaign_details:"",donor_total_donation_amount:0,donor_count_campaign:0,campaign_report:"",edit_profile:!1,email:"",phone:"",first_name:"",last_name:"",pan_number:"",password:"",confirmPassword:"",errorMessagePassword:"",errorMessageConfirmPassword:""}},created(){this.user.isLoggedIn()||this.$router.push("/sadbhavna")},mounted(){const e=j();document.title="Profile "+e.params.name,this.get_user_detail(e.params.name),this.get_donation_details(e.params.name),this.get_campaign_details(e.params.name),this.get_details_of_donor_donations(e.params.name),this.get_details_of_ngo_campaigns(e.params.name),this.donor=e.params.name},computed:{},resources:{download_80g(){return{method:"sadbhavna_donatekart.api.donor.download_80g",onSuccess:e=>{console.log("okey",e);let n=`/api/method/frappe.utils.print_format.download_pdf?doctype=Tax Exemption 80G Certificate&name=${e}&format=80G Certificate for Donation`;window.open(n,"_blank")},onError:e=>{console.log("somthing want wrong!",e)}}},get_details_of_donor_donations(){return{method:"sadbhavna_donatekart.api.donor.get_details_of_donor_donations",onSuccess:e=>{this.donor_count_campaign=e[0],this.donor_total_donation_amount=e[1]},onError:e=>{console.log("error",e)}}},get_details_of_ngo_campaigns(){return{method:"sadbhavna_donatekart.api.campaign.get_details_of_ngo_campaigns",onSuccess:e=>{this.campaign_report=e[0]},onError:e=>{console.log("error",e)}}},update_donor(){return{method:"sadbhavna_donatekart.api.donor.update_donor",onSuccess:e=>{this.$toast({title:"Profile Updated",text:"Your Profile is successfully updated.",icon:"check",position:"top-center"}),this.$router.go(-1)},onError:e=>{console.log("error",e),this.$toast({title:"Error",text:e,icon:"x-circle",appearance:"denger",position:"top-center"})}}},set_image(){return{method:"sadbhavna_donatekart.api.donor.set_image",onSuccess:e=>{this.$toast({title:"Profile Picture Updated",text:"Your Profile Picture is successfully updated.",icon:"check",position:"top-center"}),this.$router.go()},onError:e=>{console.log("error",e),this.$toast({title:"Error",text:e,icon:"x-circle",appearance:"denger",position:"top-center"})}}}},methods:{get_user_detail(e){let n="/api/resource/User/"+e;fetch(n,{method:"GET"}).then(d=>{d.json().then(_=>{this.user_data=_,this.email=_.data.email,this.phone=_.data.phone,this.first_name=_.data.first_name,this.last_name=_.data.last_name,this.pan_number=""})}).catch(d=>{console.error(d)})},get_donation_details(e){let n=`/api/resource/Donation?filters={"email": "${e}"}&fields=["*"]`;fetch(n,{method:"GET"}).then(d=>{d.json().then(_=>{this.donation_details=_})}).catch(d=>{console.log(d)})},download_80g(e,n){this.$resources.download_80g.submit({donation:e,date:n,donor:this.donor})},get_campaign_details(e){let n=`/api/resource/NGO?filters={"email": "${e}"}&fields=["name"]`;fetch(n,{method:"GET"}).then(d=>{d.json().then(_=>{let m=`/api/resource/Donation Campaign?filters={"ngo": "${_.data[0].name}"}&fields=["*"]`;fetch(m,{method:"GET"}).then(w=>{w.json().then(v=>{this.campaign_details=v.data})})})}).catch(d=>{console.log(d)})},get_details_of_donor_donations(e){this.$resources.get_details_of_donor_donations.submit({donor:e})},get_details_of_ngo_campaigns(e){this.$resources.get_details_of_ngo_campaigns.submit({ngo:e})},edit(){this.edit_profile=!0},save(){var e=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;if(this.password==""?this.errorMessagePassword="Enter password":e.test(this.password)==!1&&(this.errorMessagePassword="Enter strong password, minimum eight characters, at least one letter, one number and one special character",console.log("pw")),this.confirmPassword==""&&(this.errorMessageConfirmPassword="Enter confirm password"),this.password!==this.confirmPassword)return this.errorMessageConfirmPassword="Confirm Password must be same of password",!0;this.edit_profile=!1,this.$resources.update_donor.submit({first_name:this.first_name,last_name:this.last_name,phone:this.phone,old_email:this.donor,password:this.password!=""?this.password:"",pan_number:this.pan_number})},cancel(){this.edit_profile=!1},upload_image(e){alert("clicked",e),console.log("url",e),this.$resources.set_image.submit({name:this.donor,user_image:e})}}},T={key:0,class:"profile-page"},S={class:"h-500-px bg-blueGray-200"},F={class:"pb-4 bg-blueGray-200"},U={class:"container mx-auto px-4 pt-96"},q={class:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64"},V={class:"px-6"},A={class:"grid grid-cols-3"},L=t("div",null,null,-1),Y={class:"grid justify-items-center profile"},R={key:0,class:"relative"},z=["src"],B={class:"shadow-xl rounded-full align-middle border-none absolute ml-12 mt-16 lg:ml-16"},H=["onClick"],I=t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),K=t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1),Z=[I,K],O={key:1,class:"relative"},J=t("img",{src:"https://crowdfunding.frappe.cloud/files/default_profile.jpeg",class:"shadow-xl rounded-full h-40 align-middle border-2 border-solid border-gray-300 absolute -m-16 -ml-20 lg:-ml-16 max-w-200-px"},null,-1),Q={class:"shadow-xl rounded-full align-middle border-none absolute ml-12 mt-16 lg:ml-16"},W=["onClick"],X=t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),tt=t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1),et=[X,tt],st=t("div",null,null,-1),ot={class:"grid lg:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 justify-center"},nt={class:""},at={class:""},rt={key:0,class:"flex justify-center pt-8"},lt={class:"w-28 text-center"},it={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},dt={class:"text-sm text-blueGray-500"},ct={class:"w-28 text-center"},_t={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},mt={class:"text-sm text-blueGray-500"},ut={key:1,class:""},pt=t("div",null,null,-1),ht={class:""},gt={key:0,class:"flex justify-center pt-8"},ft={key:1,class:"flex justify-center"},xt={class:"w-28 text-center"},bt={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},vt={class:"text-sm text-blueGray-500"},yt={class:"w-28 text-center"},wt={class:"text-xl font-bold block uppercase tracking-wide text-blue-500"},kt={class:"text-sm text-blueGray-500"},Ct={class:"w-28 text-center"},Pt={class:"text-xl font-bold block uppercase tracking-wide text-red-500"},Et={class:"text-sm text-blueGray-500"},Nt=t("div",{class:"flex flex-wrap justify-center"},null,-1),Dt={class:"mt-10"},jt={class:"container mx-auto h-full"},Gt={class:"w-full bg-grey-lightest"},$t={class:"container mx-auto py-0"},Mt={class:"w-4/6 lg:w:4/6 mx-auto bg-white"},Tt={class:""},St={key:0,class:"text-center"},Ft={class:"text-3xl font-semibold leading-normal mb-2 text-blueGray-700"},Ut={class:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase"},qt={key:1,class:"text-center"},Vt={class:"grid lg:grid-cols-2 md:grid-cols-2 sm:grid-cols-1 gap-4 mb-4 lg:mr-8 sm:ml-0 lg:ml-8 sm:ml-0"},At={class:"block text-grey-darker text-sm font-bold mb-2",for:"first_name"},Lt={class:"block text-grey-darker text-sm font-bold mb-2",for:"last_name"},Yt={class:"mb-4 lg:mr-8 sm:ml-0 lg:ml-8 sm:ml-0"},Rt={class:"block text-grey-darker text-sm font-bold mb-2",for:"number"},zt=t("span",{class:"text-red-600"},"*",-1),Bt={class:"mb-4 lg:mr-8 sm:ml-0 lg:ml-8 sm:ml-0"},Ht={class:"block text-grey-darker text-sm font-bold mb-2",for:"number"},It=t("span",{class:"text-red-600"},null,-1),Kt={class:"text-red-600"},Zt={key:0,class:"mb-4 lg:mr-8 sm:ml-0 lg:ml-8 sm:ml-0"},Ot={class:"block text-grey-darker text-sm font-bold mb-2",for:"number"},Jt=t("span",{class:"text-red-600"},"*",-1),Qt={class:"text-red-600"},Wt={class:"grid justify-items-center"},Xt={key:0,class:"mt-4 sm:mt-2"},te={key:0},ee={key:0,class:"text-center pt-4 text-2xl text-gray-600"},se={key:1,class:"flex flex-col"},oe={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},ne={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},ae={class:"overflow-hidden"},re={class:"min-w-full"},le={class:"bg-white border-b"},ie={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},de={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},ce={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},_e={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},me={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},ue={class:"text-sm text-gray-900 font-light px-6 py-4"},pe={class:"text-sm text-gray-900 font-light px-6 py-4"},he={class:"text-sm text-gray-900 font-light px-6 py-4"},ge=["onClick"],fe={key:2},xe={class:"text-center font-bold text-gray-500"},be={class:"text-center text-sm leading-normal mt-2 mb-5 text-blue-400 font-bold"},ve={key:1},ye={key:0,class:"text-center text-2xl text-gray-600"},we={key:1,class:"flex flex-col"},ke={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Ce={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},Pe={class:"overflow-hidden"},Ee={class:"min-w-full"},Ne={class:"bg-white border-b"},De={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},je={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Ge={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},$e={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Me={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Te={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Se={scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Fe={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},Ue={class:"text-sm text-gray-900 font-light px-6 py-4"},qe={class:"text-sm text-gray-900 font-light px-6 py-4"},Ve={class:"text-sm text-gray-900 font-light px-6 py-4"},Ae={class:"text-sm text-green-500 font-bold px-6 py-4"},Le={class:"text-sm text-gray-900 font-light px-6 py-4"},Ye={class:"text-sm text-gray-900 font-light px-6 py-4"},Re={class:"text-center text-sm leading-normal m-4 text-blue-400 font-bold"},ze={key:2},Be={class:"text-center font-bold text-gray-500"},He={class:"text-center text-sm leading-normal mt-2 mb-5 text-blue-400 font-bold"};function Ie(e,n,d,_,o,m){const w=y("Navbar"),v=y("FileUploader"),k=y("router-link"),C=y("Footer");return o.user_data?(a(),r("main",T,[t("section",S,[u(w),t("div",F,[t("div",U,[t("div",q,[t("div",V,[t("div",A,[L,t("div",null,[t("div",Y,[o.user_data.data.user_image?(a(),r("div",R,[t("img",{src:o.user_data.data.user_image,class:"shadow-xl rounded-full h-40 align-middle border-none absolute -m-16 -ml-20 lg:-ml-16 max-w-200-px"},null,8,z),t("div",B,[u(v,{onSuccess:n[0]||(n[0]=l=>m.upload_image(l.file_url))},{default:f(({openFileSelector:l})=>[(a(),r("svg",{onClick:l,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},Z,8,H))]),_:1})])])):(a(),r("div",O,[t("div",null,[J,t("div",Q,[u(v,{onSuccess:n[1]||(n[1]=l=>m.upload_image(l.file_url))},{default:f(({openFileSelector:l})=>[(a(),r("svg",{onClick:l,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},et,8,W))]),_:1})])])]))])]),st]),t("div",ot,[t("div",nt,[o.user_data?(a(!0),r(p,{key:0},h(o.user_data.data.roles,l=>(a(),r("div",at,[l.role=="Donor"?(a(),r("div",rt,[t("div",lt,[t("span",it,s(o.donor_count_campaign),1),t("span",dt,s(e.$t("Total Donation Campaign")),1)]),t("div",ct,[t("span",_t,s(o.donor_total_donation_amount),1),t("span",mt,s(e.$t("Total Donate Amount")),1)])])):l.role=="Ngo"?(a(),r("div",ut)):c("",!0)]))),256)):c("",!0)]),pt,t("div",null,[o.user_data?(a(!0),r(p,{key:0},h(o.user_data.data.roles,l=>(a(),r("div",ht,[l.role=="Donor"?(a(),r("div",gt)):l.role=="Ngo"?(a(),r("div",ft,[t("div",xt,[t("span",bt,s(o.campaign_report.total_live_campaign||0),1),t("span",vt,s(e.$t("Total Live Campaign")),1)]),t("div",yt,[t("span",wt,s(o.campaign_report.total_pending_campaign||0),1),t("span",kt,s(e.$t("Total Pending Campaign")),1)]),t("div",Ct,[t("span",Pt,s(o.campaign_report.total_rejected_campaign||0),1),t("span",Et,s(e.$t("Total Rejected Campaign")),1)])])):c("",!0)]))),256)):c("",!0)])]),Nt,t("div",Dt,[t("div",jt,[t("div",Gt,[t("div",$t,[t("div",Mt,[t("form",null,[t("div",Tt,[o.edit_profile?(a(),r("div",qt,[t("div",Vt,[t("div",null,[t("label",At,s(e.$t("First Name")),1),x(t("input",{class:"appearance-none form-control block border rounded w-full text-grey-darker","onUpdate:modelValue":n[2]||(n[2]=l=>o.first_name=l),placeholder:"Your first name",type:"text",required:""},null,512),[[b,o.first_name]])]),t("div",null,[t("label",Lt,s(e.$t("Last Name")),1),x(t("input",{class:"appearance-none border form-control block rounded w-full text-grey-darker","onUpdate:modelValue":n[3]||(n[3]=l=>o.last_name=l),type:"text",placeholder:"Your last name",required:""},null,512),[[b,o.last_name]])])]),t("div",Yt,[t("label",Rt,[g(s(e.$t("Phone Number"))+" ",1),zt]),x(t("input",{class:"appearance-none border form-control block rounded w-full py-2 text-grey-darker","onUpdate:modelValue":n[4]||(n[4]=l=>o.phone=l),type:"number",placeholder:"Your phone number",required:""},null,512),[[b,o.phone]])]),t("div",Bt,[t("label",Ht,[g(s(e.$t("Set New Password"))+" ",1),It]),x(t("input",{class:"appearance-none border form-control block rounded w-full py-2 text-grey-darker",type:"password","onUpdate:modelValue":n[5]||(n[5]=l=>o.password=l),onKeyup:n[6]||(n[6]=l=>o.errorMessagePassword=""),placeholder:"Enter New Password"},null,544),[[b,o.password]]),t("p",Kt,s(e.$t(o.errorMessagePassword)),1)]),o.password!=""?(a(),r("div",Zt,[t("label",Ot,[g(s(e.$t("Confirm Password"))+" ",1),Jt]),x(t("input",{class:"appearance-none border form-control block rounded w-full py-2 text-grey-darker",type:"password","onUpdate:modelValue":n[7]||(n[7]=l=>o.confirmPassword=l),onKeyup:n[8]||(n[8]=l=>o.errorMessageConfirmPassword=""),placeholder:"Enter Again Password",required:""},null,544),[[b,o.confirmPassword]]),t("p",Qt,s(e.$t(o.errorMessageConfirmPassword)),1)])):c("",!0),t("button",{onClick:n[9]||(n[9]=l=>m.save()),class:"bg-green-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded mr-2 mb-4 ease-linear transition-all duration-150",type:"button"},s(e.$t("Save")),1),t("button",{onClick:n[10]||(n[10]=l=>m.cancel()),class:"bg-gray-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded mr-2 mb-4 ease-linear transition-all duration-150",type:"button"},s(e.$t("cancel")),1)])):(a(),r("div",St,[t("h3",Ft,s(o.user_data.data.full_name),1),t("div",Ut,[t("div",null,s(o.user_data.data.email),1),t("div",null,s(o.user_data.data.phone),1)])])),(a(!0),r(p,null,h(o.user_data.data.roles,l=>(a(),r("div",Wt,[l.role=="Donor"?(a(),r("div",Xt,[o.edit_profile?c("",!0):(a(),r("button",{key:0,onClick:n[11]||(n[11]=i=>m.edit()),class:"bg-green-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded ease-linear transition-all duration-150",type:"button"},s(e.$t("Edit Profile")),1))])):c("",!0)]))),256))])])])])])])]),o.user_data?(a(!0),r(p,{key:0},h(o.user_data.data.roles,l=>(a(),r("div",null,[l.role=="Donor"?(a(),r("div",te,[o.donation_details.data!=""?(a(),r("div",ee,s(e.$t("Your Donations")),1)):c("",!0),o.donation_details.data!=""?(a(),r("div",se,[t("div",oe,[t("div",ne,[t("div",ae,[t("table",re,[t("thead",le,[t("tr",null,[t("th",ie,s(e.$t("Campaign Name")),1),t("th",de,s(e.$t("Amount")),1),t("th",ce,s(e.$t("Date")),1),t("th",_e,s(e.$t("Download 80G Certificate")),1)])]),t("tbody",null,[(a(!0),r(p,null,h(o.donation_details.data,i=>(a(),r("tr",me,[t("td",ue,s(i.name),1),t("td",pe,s(i.amount),1),t("td",he,s(i.date),1),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 cursor-pointer",onClick:Ke=>m.download_80g(i.name,i.date)},s(e.$t("Download")),9,ge)]))),256))])])])])])])):(a(),r("div",fe,[t("div",xe,s(e.$t("Donate Item to see Donations and Download Certificate")),1),t("div",be,[u(k,{to:"/sadbhavna"},{default:f(()=>[g(s(e.$t("Click Here To Explore Campaign")),1)]),_:1})])]))])):l.role=="Ngo"?(a(),r("div",ve,[o.campaign_details.data!=""?(a(),r("div",ye,s(e.$t("Your Campaign")),1)):c("",!0),o.campaign_details.data!=""?(a(),r("div",we,[t("div",ke,[t("div",Ce,[t("div",Pe,[t("table",Ee,[t("thead",Ne,[t("tr",null,[t("th",De,s(e.$t("Campaign Name")),1),t("th",je,s(e.$t("Campaign Category")),1),t("th",Ge,s(e.$t("Requested Amount")),1),t("th",$e,s(e.$t("Raised Amount")),1),t("th",Me,s(e.$t("Start Date")),1),t("th",Te,s(e.$t("End Date")),1),t("th",Se,s(e.$t("Status")),1)])]),t("tbody",null,[(a(!0),r(p,null,h(o.campaign_details,i=>(a(),r("tr",Fe,[t("td",Ue,s(i.campaign_title),1),t("td",qe,s(i.campaign_category),1),t("td",Ve,s(i.donation_amount),1),t("td",Ae,s(i.raised_amount),1),t("td",Le,s(i.start_date),1),t("td",Ye,s(i.end_date),1),t("td",{class:G(["text-sm font-bold px-6 py-4",i.status==="Live"?"text-green-500":"",i.status==="Pending"?"text-blue-500":"",i.status==="Rejected"?"text-red-500":"",i.status==="Closed"?"text-orange-500":""])},s(i.status),3)]))),256))])])]),t("div",Re,[u(k,{to:"/sadbhavna/request-campaign"},{default:f(()=>[g(s(e.$t("Request New Campaign")),1)]),_:1})])])])])):(a(),r("div",ze,[t("div",Be,s(e.$t("You don't have any campaign live yet.")),1),t("div",He,[u(k,{to:"/sadbhavna/request-campaign"},{default:f(()=>[g(s(e.$t("Click Here To Request A New Campaign")),1)]),_:1})])]))])):c("",!0)]))),256)):c("",!0)])])])]),u(C)])])):c("",!0)}var Qe=N(M,[["render",Ie]]);export{Qe as default};
