import{N as C,F as D}from"./Footer.e31b5046.js";import{_ as G,o as s,c as a,e as t,k as u,F as h,g as x,b as _,t as r,y as b,G as y,I as N,p as g,r as v,w,n as E}from"./index.d7557b21.js";const T={name:"Login",components:{Navbar:C,Footer:D},data(){return{user_data:"",donation_details:"",donor:"",campaign_details:"",donor_total_donation_amount:0,donor_count_campaign:0,campaign_report:"",edit_profile:!1,email:"",phone:"",first_name:"",last_name:"",pan_number:""}},mounted(){const e=N();this.get_user_detail(e.params.name),this.get_donation_details(e.params.name),this.get_campaign_details(e.params.name),this.get_details_of_donor_donations(e.params.name),this.get_details_of_ngo_campaigns(e.params.name),this.donor=e.params.name},computed:{},resources:{download_80g(){return{method:"sadbhavna_donatekart.api.donor.download_80g",onSuccess:e=>{console.log("okey",e);let n=`/api/method/frappe.utils.print_format.download_pdf?doctype=Tax Exemption 80G Certificate&name=${e}&format=80G Certificate for Donation`;window.open(n,"_blank")},onError:e=>{console.log("somthing want wrong!",e)}}},get_details_of_donor_donations(){return{method:"sadbhavna_donatekart.api.donor.get_details_of_donor_donations",onSuccess:e=>{this.donor_count_campaign=e[0],this.donor_total_donation_amount=e[1]},onError:e=>{console.log("error",e)}}},get_details_of_ngo_campaigns(){return{method:"sadbhavna_donatekart.api.campaign.get_details_of_ngo_campaigns",onSuccess:e=>{this.campaign_report=e[0]},onError:e=>{console.log("error",e)}}},update_donor(){return{method:"sadbhavna_donatekart.api.donor.update_donor",onSuccess:e=>{this.$toast({title:"Profile Updated",text:"Your Profile is successfully updated.",customIcon:"check"}),this.$router.go(-1)},onError:e=>{console.log("error",e),this.$toast({title:"Error",text:e,customIcon:"circle-fail",appearance:"denger"})}}}},methods:{get_user_detail(e){let n="/api/resource/User/"+e;fetch(n,{method:"GET"}).then(d=>{d.json().then(c=>{this.user_data=c,this.email=c.data.email,this.phone=c.data.phone,this.first_name=c.data.first_name,this.last_name=c.data.last_name,this.pan_number=""})}).catch(d=>{console.error(d)})},get_donation_details(e){let n=`/api/resource/Donation?filters={"email": "${e}"}&fields=["*"]`;fetch(n,{method:"GET"}).then(d=>{d.json().then(c=>{this.donation_details=c})}).catch(d=>{console.log(d)})},download_80g(e,n){this.$resources.download_80g.submit({donation:e,date:n,donor:this.donor})},get_campaign_details(e){let n=`/api/resource/NGO?filters={"email": "${e}"}&fields=["name"]`;fetch(n,{method:"GET"}).then(d=>{d.json().then(c=>{let m=`/api/resource/Donation Campaign?filters={"ngo": "${c.data[0].name}"}&fields=["*"]`;fetch(m,{method:"GET"}).then(f=>{f.json().then(p=>{this.campaign_details=p.data})})})}).catch(d=>{console.log(d)})},get_details_of_donor_donations(e){this.$resources.get_details_of_donor_donations.submit({donor:e})},get_details_of_ngo_campaigns(e){this.$resources.get_details_of_ngo_campaigns.submit({ngo:e})},edit(){this.edit_profile=!0},save(){this.edit_profile=!1,this.$resources.update_donor.submit({first_name:this.first_name,last_name:this.last_name,phone:this.phone,old_email:this.donor,pan_number:this.pan_number})},cancel(){this.edit_profile=!1}}},j={key:0,class:"profile-page"},q={class:"h-500-px bg-blueGray-200"},P={class:"pb-4 bg-blueGray-200"},S={class:"container mx-auto px-4 pt-96"},F={class:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64"},R={class:"px-6"},V={class:"flex flex-wrap justify-center"},Y={class:"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center"},A={key:0,class:"relative"},L=["src"],U={key:1,class:"relative"},I=t("div",{class:"shadow-xl rounded-full h-auto align-middle border-none absolute -m-16 -ml-20 lg:-ml-16 max-w-150-px"},null,-1),B=[I],H={class:"lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center"},z={key:0,class:"py-6 px-3 mt-32 sm:mt-0"},M={class:"w-full lg:w-4/12 px-4 lg:order-1"},O={key:0,class:"flex justify-center py-4 lg:pt-4 pt-8"},J={class:"mr-4 p-3 text-center"},K={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},Q=t("span",{class:"text-sm text-blueGray-500"},"Total Donation Campaign",-1),W={class:"mr-4 p-3 text-center"},X={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},Z=t("span",{class:"text-sm text-blueGray-500"},"Total Donate Amount",-1),$={key:1,class:"flex justify-center py-4 lg:pt-4 pt-8"},tt={class:"mr-4 p-3 text-center"},et={class:"text-xl font-bold block uppercase tracking-wide text-green-500"},ot=t("span",{class:"text-sm text-blueGray-500"},"Total Live Campaign",-1),st={class:"mr-4 p-3 text-center"},at={class:"text-xl font-bold block uppercase tracking-wide text-blue-500"},nt=t("span",{class:"text-sm text-blueGray-500"},"Total Pending Campaign",-1),lt={class:"lg:mr-4 p-3 text-center"},rt={class:"text-xl font-bold block uppercase tracking-wide text-red-500"},it=t("span",{class:"text-sm text-blueGray-500"},"Total Rejected Campaign",-1),dt={class:"mt-32"},ct={class:"container mx-auto h-full"},_t={class:"w-full bg-grey-lightest"},mt={class:"container mx-auto py-0"},pt={class:"w-4/6 lg:w:4/6 mx-auto bg-white"},ut={class:""},ht={key:0,class:"text-center"},xt={class:"text-4xl font-semibold leading-normal mb-2 text-blueGray-700"},gt={class:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase"},ft={key:1,class:"text-center"},bt={class:"grid lg:grid-cols-2 md:grid-cols-2 sm:grid-cols-1 gap-4 justify-items-center mb-4"},yt=t("label",{class:"block text-grey-darker text-sm font-bold mb-2",for:"first_name"},"First Name",-1),vt=t("label",{class:"block text-grey-darker text-sm font-bold mb-2",for:"last_name"},"Last Name",-1),wt={class:"mb-4 lg:mr-8 sm:ml-0 lg:ml-8 sm:ml-0"},kt=t("label",{class:"block text-grey-darker text-sm font-bold mb-2",for:"number"},[g("Phone Number "),t("span",{class:"text-red-600"},"*")],-1),Ct={key:0},Dt={key:0,class:"text-center pt-4 text-2xl text-gray-600"},Gt={key:1,class:"flex flex-col"},Nt={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Et={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},Tt={class:"overflow-hidden"},jt={class:"min-w-full"},qt=t("thead",{class:"bg-white border-b"},[t("tr",null,[t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Campaign Name "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Amount "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Date "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Download 80G Certificate ")])],-1),Pt={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},St={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Ft={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Rt={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Vt=["onClick"],Yt={key:2},At=t("div",{class:"text-center font-bold text-gray-500"}," Donate Item to see Donations and Download Certificate ",-1),Lt={class:"text-center text-sm leading-normal mt-2 mb-5 text-blue-400 font-bold"},Ut={key:1},It={key:0,class:"text-center text-2xl text-gray-600"},Bt={key:1,class:"flex flex-col"},Ht={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},zt={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},Mt={class:"overflow-hidden"},Ot={class:"min-w-full"},Jt=t("thead",{class:"bg-white border-b"},[t("tr",null,[t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Campaign Name "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Campaign Category "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Requested Amount "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Raised Amount "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Start Date "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," End Date "),t("th",{scope:"col",class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Status ")])],-1),Kt={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},Qt={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Wt={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Xt={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Zt={class:"text-sm text-green-500 font-bold px-6 py-4 whitespace-nowrap"},$t={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},te={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},ee={class:"text-center text-sm leading-normal m-4 text-blue-400 font-bold"},oe={key:2},se=t("div",{class:"text-center font-bold text-gray-500"}," You don't have any campaign live yet. ",-1),ae={class:"text-center text-sm leading-normal mt-2 mb-5 text-blue-400 font-bold"};function ne(e,n,d,c,o,m){const f=v("Navbar"),p=v("router-link"),k=v("Footer");return o.user_data?(s(),a("main",j,[t("section",q,[u(f),t("div",P,[t("div",S,[t("div",F,[t("div",R,[t("div",V,[t("div",Y,[o.user_data.data.user_image?(s(),a("div",A,[t("img",{src:o.user_data.data.user_image,class:"shadow-xl rounded-full h-40 align-middle border-none absolute -m-16 -ml-20 lg:-ml-16 max-w-200-px"},null,8,L)])):(s(),a("div",U,B))]),(s(!0),a(h,null,x(o.user_data.data.roles,i=>(s(),a("div",H,[i.role=="Donor"?(s(),a("div",z,[o.edit_profile?_("",!0):(s(),a("button",{key:0,onClick:n[0]||(n[0]=l=>m.edit()),class:"bg-green-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded lg:ml-0 md:ml-0 sm:ml-32 ease-linear transition-all duration-150",type:"button"}," Edit Profile "))])):_("",!0)]))),256)),o.user_data?(s(!0),a(h,{key:0},x(o.user_data.data.roles,i=>(s(),a("div",M,[i.role=="Donor"?(s(),a("div",O,[t("div",J,[t("span",K,r(o.donor_count_campaign),1),Q]),t("div",W,[t("span",X,r(o.donor_total_donation_amount),1),Z])])):i.role=="Ngo"?(s(),a("div",$,[t("div",tt,[t("span",et,r(o.campaign_report.total_live_campaign),1),ot]),t("div",st,[t("span",at,r(o.campaign_report.total_pending_campaign),1),nt]),t("div",lt,[t("span",rt,r(o.campaign_report.total_rejected_campaign),1),it])])):_("",!0)]))),256)):_("",!0)]),t("div",dt,[t("div",ct,[t("div",_t,[t("div",mt,[t("div",pt,[t("form",null,[t("div",ut,[o.edit_profile?(s(),a("div",ft,[t("div",bt,[t("div",null,[yt,b(t("input",{class:"appearance-none form-control block border rounded w-full text-grey-darker","onUpdate:modelValue":n[1]||(n[1]=i=>o.first_name=i),placeholder:"Your first name",type:"text",required:""},null,512),[[y,o.first_name]])]),t("div",null,[vt,b(t("input",{class:"appearance-none border form-control block rounded w-full text-grey-darker","onUpdate:modelValue":n[2]||(n[2]=i=>o.last_name=i),type:"text",placeholder:"Your last name",required:""},null,512),[[y,o.last_name]])])]),t("div",wt,[kt,b(t("input",{class:"appearance-none border form-control block rounded w-full py-2 text-grey-darker","onUpdate:modelValue":n[3]||(n[3]=i=>o.phone=i),type:"number",placeholder:"Your phone number",required:""},null,512),[[y,o.phone]])]),t("button",{onClick:n[4]||(n[4]=i=>m.save()),class:"bg-green-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded mr-2 mb-4 ease-linear transition-all duration-150",type:"button"}," Save "),t("button",{onClick:n[5]||(n[5]=i=>m.cancel()),class:"bg-gray-500 uppercase text-white font-bold hover:bg-white hover:text-green-500 hover:outline hover:outline-1 hover:outline-offset-1 shadow text-xs px-4 py-2 rounded mr-2 mb-4 ease-linear transition-all duration-150",type:"button"}," cancel ")])):(s(),a("div",ht,[t("h3",xt,r(o.user_data.data.full_name),1),t("div",gt,[t("div",null,r(o.user_data.data.email),1),t("div",null,r(o.user_data.data.phone),1)])]))])])])])])])]),o.user_data?(s(!0),a(h,{key:0},x(o.user_data.data.roles,i=>(s(),a("div",null,[i.role=="Donor"?(s(),a("div",Ct,[o.donation_details.data!=""?(s(),a("div",Dt," Your Donations ")):_("",!0),o.donation_details.data!=""?(s(),a("div",Gt,[t("div",Nt,[t("div",Et,[t("div",Tt,[t("table",jt,[qt,t("tbody",null,[(s(!0),a(h,null,x(o.donation_details.data,l=>(s(),a("tr",Pt,[t("td",St,r(l.name),1),t("td",Ft,r(l.amount),1),t("td",Rt,r(l.date),1),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap cursor-pointer",onClick:le=>m.download_80g(l.name,l.date)}," Download ",8,Vt)]))),256))])])])])])])):(s(),a("div",Yt,[At,t("div",Lt,[u(p,{to:"/sadbhavna"},{default:w(()=>[g("Click Here To Explore Campaign")]),_:1})])]))])):i.role=="Ngo"?(s(),a("div",Ut,[o.campaign_details.data!=""?(s(),a("div",It," Your Campaign ")):_("",!0),o.campaign_details.data!=""?(s(),a("div",Bt,[t("div",Ht,[t("div",zt,[t("div",Mt,[t("table",Ot,[Jt,t("tbody",null,[(s(!0),a(h,null,x(o.campaign_details,l=>(s(),a("tr",Kt,[t("td",Qt,r(l.campaign_title),1),t("td",Wt,r(l.campaign_category),1),t("td",Xt,r(l.donation_amount),1),t("td",Zt,r(l.raised_amount),1),t("td",$t,r(l.start_date),1),t("td",te,r(l.end_date),1),t("td",{class:E(["text-sm font-bold px-6 py-4 whitespace-nowrap",l.status==="Live"?"text-green-500":"",l.status==="Pending"?"text-blue-500":"",l.status==="Rejected"?"text-red-500":"",l.status==="Closed"?"text-orange-500":""])},r(l.status),3)]))),256))])])]),t("div",ee,[u(p,{to:"/sadbhavna/request-campaign"},{default:w(()=>[g("Request New Campaign")]),_:1})])])])])):(s(),a("div",oe,[se,t("div",ae,[u(p,{to:"/sadbhavna/request-campaign"},{default:w(()=>[g("Click Here To Request A New Campaign")]),_:1})])]))])):_("",!0)]))),256)):_("",!0)])])])]),u(k)])])):_("",!0)}var de=G(T,[["render",ne]]);export{de as default};
