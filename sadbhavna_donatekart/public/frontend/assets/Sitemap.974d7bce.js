import{_ as P,o as C,c as R,e as E,k as M,r as w}from"./index.ed28e7db.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function u(a,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,e,t,n);else for(var l=a.length-1;l>=0;l--)(i=a[l])&&(o=(r<3?i(o):r>3?i(e,t,o):i(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function y(a,e,t,n){function r(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(c){try{p(n.next(c))}catch(f){i(f)}}function m(c){try{p(n.throw(c))}catch(f){i(f)}}function p(c){c.done?o(c.value):r(c.value).then(l,m)}p((n=n.apply(a,e||[])).next())})}function g(a){return a.replace(/[A-Z]+/g,e=>`-${e}`).replace(/^-/,"").toLowerCase()}function h(a){return function(e,t){const n=a||g(t);e.addObservedAttribute&&e.addObservedAttribute(n),Object.defineProperty(e,t,{get(){return this.getAttribute(n)},set(r){r==null?this.removeAttribute(n):this.setAttribute(n,r),this.notifyPropertyChanged(t)},enumerable:!0,configurable:!0})}}function A(a){return function(e,t){const n=a||g(t);e.addObservedAttribute&&e.addObservedAttribute(n),Object.defineProperty(e,t,{get(){return this.hasAttribute(n)},set(r){r?this.setAttribute(n,""):this.removeAttribute(n),this.notifyPropertyChanged(t)},enumerable:!0,configurable:!0})}}function v(a){return a?h(a):function(e,t){Object.defineProperty(e,t,{get(){return this[`$__${t}`]},set(n){this[`$__${t}`]=n,this.notifyPropertyChanged(t)},enumerable:!0,configurable:!0})}}function s(a){return function(e,t){Object.defineProperty(e,a,{get(){return this[t]},set(n){this[t]=n},enumerable:!0,configurable:!1})}}let b={};function q(a){const e=b[a];if(e)return e;const t=new Promise((n,r)=>{const o=document.createElement("script");o.src=a,o.async=!0;const i=()=>{n()},l=()=>{m(),delete b[a],o.remove(),r(new Error(`Unable to load script ${a}`))};o.addEventListener("load",i),o.addEventListener("error",l),document.body.appendChild(o);function m(){o.removeEventListener("load",i),o.removeEventListener("error",l)}});return b[a]=t,t}class I{constructor(e){this.handleClick=t=>y(this,void 0,void 0,function*(){const n=this.config;if(!n)throw new Error("google-pay-button: Missing configuration");const r=this.createLoadPaymentDataRequest(n);try{if(n.onClick&&n.onClick(t),t.defaultPrevented)return;const o=yield this.client.loadPaymentData(r);n.onLoadPaymentData&&n.onLoadPaymentData(o)}catch(o){o.statusCode==="CANCELED"?n.onCancel&&n.onCancel(o):n.onError?n.onError(o):console.error(o)}}),this.options=e}getElement(){return this.element}isGooglePayLoaded(){var e,t;return"google"in(window||global)&&!!(!((t=(e=google==null?void 0:google.payments)===null||e===void 0?void 0:e.api)===null||t===void 0)&&t.PaymentsClient)}mount(e){var t;return y(this,void 0,void 0,function*(){if(!this.isGooglePayLoaded())try{yield q("https://pay.google.com/gp/p/js/pay.js")}catch(n){!((t=this.config)===null||t===void 0)&&t.onError?this.config.onError(n):console.error(n);return}this.element=e,e&&(this.appendStyles(),this.config&&this.updateElement())})}unmount(){this.element=void 0}configure(e){let t;return this.config=e,(!this.oldInvalidationValues||this.isClientInvalidated(e))&&(t=this.updateElement()),this.oldInvalidationValues=this.getInvalidationValues(e),t!=null?t:Promise.resolve()}createClientOptions(e){const t={environment:e.environment,merchantInfo:this.createMerchantInfo(e)};return(e.onPaymentDataChanged||e.onPaymentAuthorized)&&(t.paymentDataCallbacks={},e.onPaymentDataChanged&&(t.paymentDataCallbacks.onPaymentDataChanged=n=>e.onPaymentDataChanged(n)||{}),e.onPaymentAuthorized&&(t.paymentDataCallbacks.onPaymentAuthorized=n=>e.onPaymentAuthorized(n)||{})),t}createIsReadyToPayRequest(e){const t=e.paymentRequest;return{apiVersion:t.apiVersion,apiVersionMinor:t.apiVersionMinor,allowedPaymentMethods:t.allowedPaymentMethods,existingPaymentMethodRequired:e.existingPaymentMethodRequired}}createLoadPaymentDataRequest(e){return Object.assign(Object.assign({},e.paymentRequest),{merchantInfo:this.createMerchantInfo(e)})}createMerchantInfo(e){const t=Object.assign({},e.paymentRequest.merchantInfo);return t.softwareInfo||(t.softwareInfo={id:this.options.softwareInfoId,version:this.options.softwareInfoVersion}),t}isMounted(){return this.element!=null&&this.element.isConnected!==!1}removeButton(){if(this.element instanceof ShadowRoot||this.element instanceof Element)for(const e of Array.from(this.element.children))e.tagName!=="STYLE"&&e.remove()}updateElement(){return y(this,void 0,void 0,function*(){if(!this.isMounted())return;const e=this.getElement();if(!this.config)throw new Error("google-pay-button: Missing configuration");this.removeButton();try{this.client=new google.payments.api.PaymentsClient(this.createClientOptions(this.config))}catch(l){this.config.onError?this.config.onError(l):console.error(l);return}const t={buttonType:this.config.buttonType,buttonColor:this.config.buttonColor,buttonSizeMode:this.config.buttonSizeMode,buttonLocale:this.config.buttonLocale,onClick:this.handleClick,allowedPaymentMethods:this.config.paymentRequest.allowedPaymentMethods},n=e.getRootNode();n instanceof ShadowRoot&&(t.buttonRootNode=n);const r=this.client.createButton(t);this.setClassName(e,[e.className,"not-ready"]),e.appendChild(r);let o=!1,i;try{i=yield this.client.isReadyToPay(this.createIsReadyToPayRequest(this.config)),o=i.result&&!this.config.existingPaymentMethodRequired||i.result&&i.paymentMethodPresent&&this.config.existingPaymentMethodRequired||!1}catch(l){this.config.onError?this.config.onError(l):console.error(l)}if(!!this.isMounted()){if(o){try{this.client.prefetchPaymentData(this.createLoadPaymentDataRequest(this.config))}catch(l){console.log("Error with prefetch",l)}this.setClassName(e,(e.className||"").split(" ").filter(l=>l&&l!=="not-ready"))}if((this.isReadyToPay!==(i==null?void 0:i.result)||this.paymentMethodPresent!==(i==null?void 0:i.paymentMethodPresent))&&(this.isReadyToPay=!!(i!=null&&i.result),this.paymentMethodPresent=i==null?void 0:i.paymentMethodPresent,this.config.onReadyToPayChange)){const l={isButtonVisible:o,isReadyToPay:this.isReadyToPay};this.paymentMethodPresent&&(l.paymentMethodPresent=this.paymentMethodPresent),this.config.onReadyToPayChange(l)}}})}setClassName(e,t){const n=t.filter(r=>r).join(" ");n?e.className=n:e.removeAttribute("class")}appendStyles(){var e,t,n;if(typeof document=="undefined")return;const r=(e=this.element)===null||e===void 0?void 0:e.getRootNode(),o=`default-google-style-${this.options.cssSelector.replace(/[^\w-]+/g,"")}-${(t=this.config)===null||t===void 0?void 0:t.buttonLocale}`;if(r&&!(!((n=r.getElementById)===null||n===void 0)&&n.call(r,o))){const i=document.createElement("style");i.id=o,i.type="text/css",i.innerHTML=`
          ${this.options.cssSelector} {
            display: inline-block;
          }
          ${this.options.cssSelector}.not-ready {
            width: 0;
            height: 0;
            overflow: hidden;
          }
        `,r instanceof Document&&r.head?r.head.appendChild(i):r.appendChild(i)}}isClientInvalidated(e){return this.oldInvalidationValues?this.getInvalidationValues(e).some((n,r)=>n!==this.oldInvalidationValues[r]):!0}getInvalidationValues(e){var t,n;return[e.environment,e.existingPaymentMethodRequired,!!e.onPaymentDataChanged,!!e.onPaymentAuthorized,e.buttonColor,e.buttonType,e.buttonLocale,e.buttonSizeMode,e.paymentRequest.merchantInfo.merchantId,e.paymentRequest.merchantInfo.merchantName,(t=e.paymentRequest.merchantInfo.softwareInfo)===null||t===void 0?void 0:t.id,(n=e.paymentRequest.merchantInfo.softwareInfo)===null||n===void 0?void 0:n.version,e.paymentRequest.allowedPaymentMethods]}}var _="@google-pay/button-element",T="3.0.9";function D(a,e=0){let t;return function(...n){window.clearTimeout(t);const r=function(){return t=void 0,a(...n)};return new Promise(o=>{t=window.setTimeout(()=>{const i=r();o(i)},e)})}}class d extends HTMLElement{constructor(){super(...arguments),this.manager=new I({cssSelector:"google-pay-button",softwareInfoId:_,softwareInfoVersion:T}),this.initializeButton=D(()=>{if(!this.assertRequiredProperty("paymentRequest")||!this.assertRequiredProperty("environment"))return;const e={paymentRequest:this.paymentRequest,environment:this.environment,existingPaymentMethodRequired:this.existingPaymentMethodRequired,onPaymentDataChanged:this.onPaymentDataChanged,onPaymentAuthorized:this.onPaymentAuthorized,buttonColor:this.buttonColor,buttonType:this.buttonType,buttonSizeMode:this.buttonSizeMode,buttonLocale:this.buttonLocale,onReadyToPayChange:t=>{this.onReadyToPayChange&&this.onReadyToPayChange(t),this.dispatch("readytopaychange",t)},onCancel:t=>{this.onCancel&&this.onCancel(t),this.dispatch("cancel",t)},onError:t=>{var n;this.onError&&((n=this.onError)===null||n===void 0||n.call(this,t)),this.dispatchEvent(new ErrorEvent("error",{error:t}))},onLoadPaymentData:t=>{this.onLoadPaymentData&&this.onLoadPaymentData(t),this.dispatch("loadpaymentdata",t)},onClick:t=>{var n;this.onClick&&((n=this.onClick)===null||n===void 0||n.call(this,t))}};this.manager.configure(e)})}get isReadyToPay(){return this.manager.isReadyToPay}assertRequiredProperty(e){const t=this[e];return t==null?(this.throwError(Error(`Required property not set: ${e}`)),!1):!0}throwError(e){throw e}static get observedAttributes(){return d._observedAttributes}addObservedAttribute(e){d._observedAttributes.push(e)}dispatch(e,t){this.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!1,detail:t}))}connectedCallback(){return y(this,void 0,void 0,function*(){return yield this.manager.mount(this),this.initializeButton()})}disconnectedCallback(){this.manager.unmount()}attributeChangedCallback(e){return this.initializeButton()}notifyPropertyChanged(e){return this.initializeButton()}}d._observedAttributes=[];u([v(),s("paymentrequest")],d.prototype,"paymentRequest",void 0);u([h()],d.prototype,"environment",void 0);u([A(),s("existingpaymentmethodrequired")],d.prototype,"existingPaymentMethodRequired",void 0);u([h(),s("buttoncolor")],d.prototype,"buttonColor",void 0);u([h(),s("buttontype")],d.prototype,"buttonType",void 0);u([h(),s("buttonsizemode")],d.prototype,"buttonSizeMode",void 0);u([h(),s("buttonlocale")],d.prototype,"buttonLocale",void 0);u([v(),s("paymentDataChangedCallback"),s("paymentdatachangedcallback"),s("onpaymentdatachanged")],d.prototype,"onPaymentDataChanged",void 0);u([v(),s("paymentAuthorizedCallback"),s("paymentauthorizedcallback"),s("onpaymentauthorized")],d.prototype,"onPaymentAuthorized",void 0);u([s("readyToPayChangeCallback"),s("readytopaychangecallback"),s("onreadytopaychange")],d.prototype,"onReadyToPayChange",void 0);u([s("loadPaymentDataCallback"),s("loadpaymentdatacallback"),s("onloadpaymentdata")],d.prototype,"onLoadPaymentData",void 0);u([s("cancelCallback"),s("cancelcallback"),s("oncancel")],d.prototype,"onCancel",void 0);u([s("errorCallback"),s("errorcallback"),s("onerror")],d.prototype,"onError",void 0);u([s("clickCallback"),s("clickcallback"),s("onclick")],d.prototype,"onClick",void 0);customElements.define("google-pay-button",d);const L={name:"GooglePay",props:{},data:()=>({amount:"10.00",existingPaymentMethodRequired:!0,buttonColor:"default",buttonType:"buy",paymentRequest:{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["MASTERCARD","VISA"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"example",gatewayMerchantId:"BCR2DN4T4SE6LFDF"}}}],merchantInfo:{merchantId:"12345678901234567890",merchantName:"Demo Merchant"}}}),methods:{onLoadPaymentData:a=>{console.log("load payment data",a.detail)},onError:a=>{console.error("error",a.error)},onPaymentDataAuthorized:a=>(console.log("payment authorized",a),{transactionState:"SUCCESS"})}},S={class:"example"},N={class:"demo"};function z(a,e,t,n,r,o){const i=w("google-pay-button");return C(),R("div",S,[E("div",N,[M(i,{environment:"TEST","button-type":a.buttonType,"button-color":a.buttonColor,"existing-payment-method-required":a.existingPaymentMethodRequired,".paymentRequest":{apiVersion:a.paymentRequest.apiVersion,apiVersionMinor:a.paymentRequest.apiVersionMinor,allowedPaymentMethods:a.paymentRequest.allowedPaymentMethods,merchantInfo:a.paymentRequest.merchantInfo,transactionInfo:{totalPriceStatus:"FINAL",totalPriceLabel:"Total",totalPrice:a.amount,currencyCode:"INR"},callbackIntents:["PAYMENT_AUTHORIZATION"]},onLoadpaymentdata:o.onLoadPaymentData,onError:o.onError,".onPaymentAuthorized":o.onPaymentDataAuthorized},null,8,["button-type","button-color","existing-payment-method-required",".paymentRequest","onLoadpaymentdata","onError",".onPaymentAuthorized"])])])}var V=P(L,[["render",z],["__scopeId","data-v-26fa1f5c"]]);export{V as default};
